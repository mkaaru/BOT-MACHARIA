Compilation failed

File: /home/runner/workspace/src/components/decycler-bot/decycler-bot.tsx:1:1
  Ã— Module build failed:
  â•°â”€â–¶   Ã—   Ã— the name `monitorContract` is defined multiple times
        â”‚       â•­â”€[/home/runner/workspace/src/components/decycler-bot/decycler-bot.tsx:726:1]
        â”‚   723 â”‚     }, [config, addLog]);
        â”‚   724 â”‚
        â”‚   725 â”‚     // Monitor open contract
        â”‚   726 â”‚     const monitorContract = useCallback(async (contractId: string): Promise<void> => {
        â”‚       Â·           â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€
        â”‚       Â·                  â•°â”€â”€ previous definition of `monitorContract` here
        â”‚   727 â”‚         if (!api_base.api) return;
        â”‚   728 â”‚
        â”‚   729 â”‚         try {
        â”‚   730 â”‚             const request = {
        â”‚   731 â”‚                 proposal_open_contract: 1,
        â”‚   732 â”‚                 contract_id: contractId,
        â”‚   733 â”‚                 subscribe: 1
        â”‚   734 â”‚             };
        â”‚   735 â”‚
        â”‚   736 â”‚             const response = await api_base.api.send(request);
        â”‚   737 â”‚
        â”‚   738 â”‚             if (response.error) {
        â”‚   739 â”‚                 addLog(`âŒ Contract monitoring error: ${response.error.message}`);
        â”‚   740 â”‚                 return;
        â”‚   741 â”‚             }
        â”‚   742 â”‚
        â”‚   743 â”‚             addLog(`ğŸ‘ï¸ Monitoring contract ${contractId}`);
        â”‚   744 â”‚         } catch (error) {
        â”‚   745 â”‚             addLog(`âŒ Failed to monitor contract: ${error.message}`);
        â”‚   746 â”‚         }
        â”‚   747 â”‚     }, [addLog]);
        â”‚   748 â”‚
        â”‚   749 â”‚     // Main trading loop
        â”‚   750 â”‚     const tradingLoop = useCallback(async (): Promise<void> => {
        â”‚   751 â”‚         if (!botStatus.is_running) return;
        â”‚   752 â”‚
        â”‚   753 â”‚         try {
        â”‚   754 â”‚             addLog('ğŸ”„ Starting trading analysis cycle...');
        â”‚   755 â”‚
        â”‚   756 â”‚             // Analyze all timeframes
        â”‚   757 â”‚             const trends = await analyzeAllTimeframes();
        â”‚   758 â”‚
        â”‚   759 â”‚             if (trends.length === 0) {
        â”‚   760 â”‚                 addLog('âš ï¸ No trend data available - will retry next cycle');
        â”‚   761 â”‚                 setBotStatus(prev => ({
        â”‚   762 â”‚                     ...prev,
        â”‚   763 â”‚                     error_message: 'No trend data available',
        â”‚   764 â”‚                     last_update: Date.now()
        â”‚   765 â”‚                 }));
        â”‚   766 â”‚                 return;
        â”‚   767 â”‚             }
        â”‚   768 â”‚
        â”‚   769 â”‚             const alignment = checkAlignment(trends);
        â”‚   770 â”‚
        â”‚   771 â”‚             // Update bot status with new analysis
        â”‚   772 â”‚             setBotStatus(prev => ({
        â”‚   773 â”‚                 ...prev,
        â”‚   774 â”‚                 trends,
        â”‚   775 â”‚                 alignment_status: alignment,
        â”‚   776 â”‚                 last_update: Date.now(),
        â”‚   777 â”‚                 error_message: ''
        â”‚   778 â”‚             }));
        â”‚   779 â”‚
        â”‚   780 â”‚             addLog(`ğŸ“Š Analysis complete - Alignment: ${alignment.toUpperCase()}`);
        â”‚   781 â”‚
        â”‚   782 â”‚             // Log individual timeframe results
        â”‚   783 â”‚             const bullishCount = trends.filter(t => t.trend === 'bullish').length;
        â”‚   784 â”‚             const bearishCount = trends.filter(t => t.trend === 'bearish').length;
        â”‚   785 â”‚             const neutralCount = trends.filter(t => t.trend === 'neutral').length;
        â”‚   786 â”‚
        â”‚   787 â”‚             addLog(`ğŸ“ˆ Trends: ${bullishCount} Bullish, ${bearishCount} Bearish, ${neutralCount} Neutral`);
        â”‚   788 â”‚
        â”‚   789 â”‚             // Check if we should enter a trade
        â”‚   790 â”‚             if (!botStatus.current_contract && (alignment === 'aligned_bullish' || alignment === 'aligned_bearish')) {
        â”‚   791 â”‚                 const direction = alignment === 'aligned_bullish' ? 'UP' : 'DOWN';
        â”‚   792 â”‚
        â”‚   793 â”‚                 // Optional 10s confirmation
        â”‚   794 â”‚                 if (config.use_10s_filter) {
        â”‚   795 â”‚                     addLog('â±ï¸ Applying 10-second confirmation filter...');
        â”‚   796 â”‚                     // Add a small delay for confirmation
        â”‚   797 â”‚                     await new Promise(resolve => setTimeout(resolve, 1000));
        â”‚   798 â”‚                 }
        â”‚   799 â”‚
        â”‚   800 â”‚                 addLog(`ğŸ¯ Strong ${direction} alignment detected - Preparing trade execution!`);
        â”‚   801 â”‚                 await executeTrade(direction);
        â”‚   802 â”‚             } else if (!botStatus.current_contract) {
        â”‚   803 â”‚                 addLog('â³ Waiting for trend alignment - No trade signal yet');
        â”‚   804 â”‚             } else {
        â”‚   805 â”‚                 addLog('ğŸ“Š Active contract in progress - Monitoring...');
        â”‚   806 â”‚             }
        â”‚   807 â”‚
        â”‚   808 â”‚         } catch (error) {
        â”‚   809 â”‚             const errorMsg = `Trading analysis error: ${error.message}`;
        â”‚   810 â”‚             addLog(`âŒ ${errorMsg}`);
        â”‚   811 â”‚             setBotStatus(prev => ({
        â”‚   812 â”‚                 ...prev,
        â”‚   813 â”‚                 error_message: errorMsg,
        â”‚   814 â”‚                 last_update: Date.now()
        â”‚   815 â”‚             }));
        â”‚   816 â”‚         }
        â”‚   817 â”‚     }, [botStatus.is_running, botStatus.current_contract, analyzeAllTimeframes, checkAlignment, config.use_10s_filter, executeTrade, addLog]);
        â”‚   818 â”‚
        â”‚   819 â”‚     // Start bot
        â”‚   820 â”‚     const startBot = useCallback(async (): Promise<void> => {
        â”‚   821 â”‚         try {
        â”‚   822 â”‚             addLog('ğŸ”„ Starting Decycler Bot...');
        â”‚   823 â”‚
        â”‚   824 â”‚             // Initialize API connection
        â”‚   825 â”‚             if (!api_base.api || api_base.api.connection.readyState !== 1) {
        â”‚   826 â”‚                 addLog('ğŸ”Œ Connecting to Deriv API...');
        â”‚   827 â”‚                 await api_base.init();
        â”‚   828 â”‚
        â”‚   829 â”‚                 // Wait for connection to be ready
        â”‚   830 â”‚                 let retries = 0;
        â”‚   831 â”‚                 while ((!api_base.api || api_base.api.connection.readyState !== 1) && retries < 15) {
        â”‚   832 â”‚                     await new Promise(resolve => setTimeout(resolve, 1000));
        â”‚   833 â”‚                     retries++;
        â”‚   834 â”‚                     const readyState = api_base.api?.connection?.readyState || 'undefined';
        â”‚   835 â”‚                     addLog(`â³ Waiting for WebSocket connection... (${retries}/15) - State: ${readyState}`);
        â”‚   836 â”‚                 }
        â”‚   837 â”‚
        â”‚   838 â”‚                 if (!api_base.api || api_base.api.connection.readyState !== 1) {
        â”‚   839 â”‚                     addLog('âŒ Failed to establish WebSocket connection. Please check your internet connection and try again.');
        â”‚   840 â”‚                     return;
        â”‚   841 â”‚                 }
        â”‚   842 â”‚             }
        â”‚   843 â”‚
        â”‚   844 â”‚             // Check connection status
        â”‚   845 â”‚             const connectionStatus = api_base.getConnectionStatus();
        â”‚   846 â”‚             addLog(`ğŸ“¡ Connection Status: ${connectionStatus}`);
        â”‚   847 â”‚
        â”‚   848 â”‚             // Check if WebSocket is actually ready
        â”‚   849 â”‚             const isReady = api_base.api?.connection?.readyState === 1;
        â”‚   850 â”‚             addLog(`ğŸ”Œ WebSocket Ready State: ${api_base.api?.connection?.readyState} (${isReady ? 'OPEN' : 'NOT READY'})`);
        â”‚   851 â”‚
        â”‚   852 â”‚             if (!isReady) {
        â”‚   853 â”‚                 addLog('âŒ WebSocket connection not ready. Please wait and try again.');
        â”‚   854 â”‚                 return;
        â”‚   855 â”‚             }
        â”‚   856 â”‚
        â”‚   857 â”‚             setBotStatus(prev => ({ ...prev, is_running: true }));
        â”‚   858 â”‚             addLog('ğŸš€ Decycler Multi-Timeframe Bot Started!');
        â”‚   859 â”‚             addLog(`ğŸ“Š Monitoring ${timeframes.join(', ')} timeframes`);
        â”‚   860 â”‚             addLog(`ğŸ¯ Symbol: ${config.symbol} | Stake: $${config.stake}`);
        â”‚   861 â”‚             addLog(`âš™ï¸ Contract Type: ${config.contract_type.toUpperCase()}`);
        â”‚   862 â”‚
        â”‚   863 â”‚             // Start trading loop
        â”‚   864 â”‚             intervalRef.current = setInterval(tradingLoop, config.monitor_interval * 1000);
        â”‚   865 â”‚
        â”‚   866 â”‚             // Run initial analysis
        â”‚   867 â”‚             await tradingLoop();
        â”‚   868 â”‚         } catch (error) {
        â”‚   869 â”‚             addLog(`âŒ Error starting bot: ${error.message}`);
        â”‚   870 â”‚         }
        â”‚   871 â”‚     }, [config, timeframes, tradingLoop, addLog]);
        â”‚   872 â”‚
        â”‚   873 â”‚         // Stop bot
        â”‚   874 â”‚     const stopBot = useCallback((): void => {
        â”‚   875 â”‚         setBotStatus(prev => ({ ...prev, is_running: false }));
        â”‚   876 â”‚
        â”‚   877 â”‚         if (intervalRef.current) {
        â”‚   878 â”‚             clearInterval(intervalRef.current);
        â”‚   879 â”‚             intervalRef.current = null;
        â”‚   880 â”‚         }
        â”‚   881 â”‚
        â”‚   882 â”‚         if (monitorRef.current) {
        â”‚   883 â”‚             clearInterval(monitorRef.current);
        â”‚   884 â”‚             monitorRef.current = null;
        â”‚   885 â”‚         }
        â”‚   886 â”‚
        â”‚   887 â”‚         addLog('â¹ï¸ Decycler Bot Stopped');
        â”‚   888 â”‚     }, [addLog]);
        â”‚   889 â”‚
        â”‚   890 â”‚     // Handle contract updates from API
        â”‚   891 â”‚     useEffect(() => {
        â”‚   892 â”‚         const handleApiResponse = (response: any) => {
        â”‚   893 â”‚             if (response && response.proposal_open_contract) {
        â”‚   894 â”‚                 const contract = response.proposal_open_contract;
        â”‚   895 â”‚
        â”‚   896 â”‚                 setBotStatus(prev => {
        â”‚   897 â”‚                     if (!prev.current_contract || prev.current_contract.id !== contract.contract_id) {
        â”‚   898 â”‚                         return prev;
        â”‚   899 â”‚                     }
        â”‚   900 â”‚
        â”‚   901 â”‚                     const updatedContract: ContractInfo = {
        â”‚   902 â”‚                         ...prev.current_contract,
        â”‚   903 â”‚                         current_price: contract.current_spot || prev.current_contract.current_price,
        â”‚   904 â”‚                         profit: contract.profit || 0,
        â”‚   905 â”‚                         status: contract.is_sold ? 'closed' : 'open'
        â”‚   906 â”‚                     };
        â”‚   907 â”‚
        â”‚   908 â”‚                     // Handle risk management
        â”‚   909 â”‚                     if (config.use_trailing_stop && contract.profit > 0) {
        â”‚   910 â”‚                         const newTrailingStop = prev.current_contract.entry_price + contract.profit - config.trailing_step;
        â”‚   911 â”‚                         if (newTrailingStop > updatedContract.trailing_stop) {
        â”‚   912 â”‚                             updatedContract.trailing_stop = newTrailingStop;
        â”‚   913 â”‚                             addLog(`ğŸ“ˆ Trailing stop updated to ${newTrailingStop.toFixed(5)}`);
        â”‚   914 â”‚                         }
        â”‚   915 â”‚                     }
        â”‚   916 â”‚
        â”‚   917 â”‚                     // Handle breakeven
        â”‚   918 â”‚                     if (config.use_breakeven && !updatedContract.breakeven_active && contract.profit >= config.breakeven_trigger) {
        â”‚   919 â”‚                         updatedContract.stop_loss = prev.current_contract.entry_price;
        â”‚   920 â”‚                         updatedContract.breakeven_active = true;
        â”‚   921 â”‚                         addLog(`âš–ï¸ Breakeven protection activated`);
        â”‚   922 â”‚                     }
        â”‚   923 â”‚
        â”‚   924 â”‚                     // Check if contract closed
        â”‚   925 â”‚                     if (contract.is_sold) {
        â”‚   926 â”‚                         const isWin = contract.profit > 0;
        â”‚   927 â”‚                         addLog(`${isWin ? 'ğŸ‰' : 'ğŸ’”'} Contract closed: ${isWin ? 'WIN' : 'LOSS'} - P&L: ${contract.profit.toFixed(2)}`);
        â”‚   928 â”‚
        â”‚   929 â”‚                         return {
        â”‚   930 â”‚                             ...prev,
        â”‚   931 â”‚                             current_contract: null,
        â”‚   932 â”‚                             winning_trades: isWin ? prev.winning_trades + 1 : prev.winning_trades,
        â”‚   933 â”‚                             total_pnl: prev.total_pnl + contract.profit
        â”‚   934 â”‚                         };
        â”‚   935 â”‚                     }
        â”‚   936 â”‚
        â”‚   937 â”‚                     return {
        â”‚   938 â”‚                         ...prev,
        â”‚   939 â”‚                         current_contract: updatedContract
        â”‚   940 â”‚                     };
        â”‚   941 â”‚                 });
        â”‚   942 â”‚             }
        â”‚   943 â”‚         };
        â”‚   944 â”‚
        â”‚   945 â”‚         // Listen for API responses
        â”‚   946 â”‚         if (typeof window !== 'undefined' && (window as any).globalObserver) {
        â”‚   947 â”‚             const globalObserver = (window as any).globalObserver;
        â”‚   948 â”‚             globalObserver.register('api.response', handleApiResponse);
        â”‚   949 â”‚
        â”‚   950 â”‚             return () => {
        â”‚   951 â”‚                 globalObserver.unregister('api.response', handleApiResponse);
        â”‚   952 â”‚             };
        â”‚   953 â”‚         }
        â”‚   954 â”‚     }, [config, addLog]);
        â”‚   955 â”‚
        â”‚   956 â”‚     // Comprehensive API connection and data testing
        â”‚   957 â”‚     const testConnection = useCallback(async (): Promise<void> => {
        â”‚   958 â”‚         try {
        â”‚   959 â”‚             addLog('ğŸ” Starting comprehensive API connection test...');
        â”‚   960 â”‚
        â”‚   961 â”‚             // Step 1: Test WebSocket connection
        â”‚   962 â”‚             if (!api_base.api || api_base.api.connection.readyState !== 1) {
        â”‚   963 â”‚                 addLog('ğŸ”Œ Initializing API connection...');
        â”‚   964 â”‚                 await api_base.init();
        â”‚   965 â”‚
        â”‚   966 â”‚                 let retries = 0;
        â”‚   967 â”‚                 while ((!api_base.api || api_base.api.connection.readyState !== 1) && retries < 15) {
        â”‚   968 â”‚                     await new Promise(resolve => setTimeout(resolve, 1000));
        â”‚   969 â”‚                     retries++;
        â”‚   970 â”‚                     if (retries % 3 === 0) {
        â”‚   971 â”‚                         addLog(`â³ Waiting for connection... (${retries}/15)`);
        â”‚   972 â”‚                     }
        â”‚   973 â”‚                 }
        â”‚   974 â”‚             }
        â”‚   975 â”‚
        â”‚   976 â”‚             if (!api_base.api || api_base.api.connection.readyState !== 1) {
        â”‚   977 â”‚                 addLog('âŒ Failed to establish WebSocket connection');
        â”‚   978 â”‚                 return;
        â”‚   979 â”‚             }
        â”‚   980 â”‚
        â”‚   981 â”‚             addLog(`âœ… WebSocket connected (Ready State: ${api_base.api.connection.readyState})`);
        â”‚   982 â”‚
        â”‚   983 â”‚             // Step 2: Test basic API communication
        â”‚   984 â”‚             const timeResponse = await Promise.race([
        â”‚   985 â”‚                 api_base.api.send({ time: 1 }),
        â”‚   986 â”‚                 new Promise((_, reject) => setTimeout(() => reject(new Error('Time request timeout')), 5000))
        â”‚   987 â”‚             ]);
        â”‚   988 â”‚
        â”‚   989 â”‚             if (timeResponse?.time) {
        â”‚   990 â”‚                 addLog(`âœ… API communication test successful. Server time: ${new Date(timeResponse.time * 1000).toLocaleString()}`);
        â”‚   991 â”‚             } else {
        â”‚   992 â”‚                 addLog('âŒ API communication test failed - no server time received');
        â”‚   993 â”‚                 return;
        â”‚   994 â”‚             }
        â”‚   995 â”‚
        â”‚   996 â”‚             // Step3: Test symbol existence
        â”‚   997 â”‚             addLog(`ğŸ” Testing symbol availability: ${config.symbol}`);
        â”‚   998 â”‚
        â”‚   999 â”‚         try {
        â”‚  1000 â”‚                 const symbolTest = await Promise.race([
        â”‚  1001 â”‚                     api_base.api.send({
        â”‚  1002 â”‚                         active_symbols: 'brief',
        â”‚  1003 â”‚                         product_type: 'basic'
        â”‚  1004 â”‚                     }),
        â”‚  1005 â”‚                     new Promise((_, reject) => setTimeout(() => reject(new Error('Symbol test timeout')), 8000))
        â”‚  1006 â”‚                 ]);
        â”‚  1007 â”‚
        â”‚  1008 â”‚                 if (symbolTest?.active_symbols) {
        â”‚  1009 â”‚                     const symbolExists = symbolTest.active_symbols.some(s => s.symbol === config.symbol);
        â”‚  1010 â”‚                     if (symbolExists) {
        â”‚  1011 â”‚                         addLog(`âœ… Symbol ${config.symbol} is available for trading`);
        â”‚  1012 â”‚                     } else {
        â”‚  1013 â”‚                         addLog(`âš ï¸ Symbol ${config.symbol} not found in active symbols list`);
        â”‚  1014 â”‚                     }
        â”‚  1015 â”‚                 }
        â”‚  1016 â”‚             } catch (symbolError) {
        â”‚  1017 â”‚                 addLog(`âš ï¸ Could not verify symbol availability: ${symbolError.message}`);
        â”‚  1018 â”‚             }
        â”‚  1019 â”‚
        â”‚  1020 â”‚             // Step 4: Test data retrieval for each timeframe
        â”‚  1021 â”‚             addLog('ğŸ“Š Testing data retrieval for all timeframes...');
        â”‚  1022 â”‚
        â”‚  1023 â”‚             const testResults = {};
        â”‚  1024 â”‚             for (const tf of timeframes) {
        â”‚  1025 â”‚                 try {
        â”‚  1026 â”‚                     addLog(`ğŸ”„ Testing ${tf} data...`);
        â”‚  1027 â”‚                     const testData = await fetchOHLCData(tf);
        â”‚  1028 â”‚                     testResults[tf] = testData.length;
        â”‚  1029 â”‚
        â”‚  1030 â”‚                     if (testData.length > 0) {
        â”‚  1031 â”‚                         addLog(`âœ… ${tf}: ${testData.length} data points retrieved`);
        â”‚  1032 â”‚                     } else {
        â”‚  1033 â”‚                         addLog(`âŒ ${tf}: No data retrieved`);
        â”‚  1034 â”‚                     }
        â”‚  1035 â”‚
        â”‚  1036 â”‚                     // Small delay between requests to avoid rate limiting
        â”‚  1037 â”‚                     await new Promise(resolve => setTimeout(resolve, 200));
        â”‚  1038 â”‚                 } catch (tfError) {
        â”‚  1039 â”‚                     addLog(`âŒ ${tf}: Error - ${tfError.message}`);
        â”‚  1040 â”‚                     testResults[tf] = 0;
        â”‚  1041 â”‚                 }
        â”‚  1042 â”‚             }
        â”‚  1043 â”‚
        â”‚  1044 â”‚             // Step 5: Summary
        â”‚  1045 â”‚             const successfulTimeframes = Object.values(testResults).filter(count => count > 0).length;
        â”‚  1046 â”‚             const totalTimeframes = timeframes.length;
        â”‚  1047 â”‚
        â”‚  1048 â”‚             addLog(`ğŸ“‹ Test Summary: ${successfulTimeframes}/${totalTimeframes} timeframes working`);
        â”‚  1049 â”‚
        â”‚  1050 â”‚             if (successfulTimeframes === 0) {
        â”‚  1051 â”‚                 addLog('âŒ No timeframes working - try a different symbol or check API connection');
        â”‚  1052 â”‚             } else if (successfulTimeframes < totalTimeframes) {
        â”‚  1053 â”‚                 addLog(`âš ï¸ Partial success - ${totalTimeframes - successfulTimeframes} timeframes failed`);
        â”‚  1054 â”‚             } else {
        â”‚  1055 â”‚                 addLog('ğŸ‰ All timeframes working perfectly!');
        â”‚  1056 â”‚
        â”‚  1057 â”‚                 // If test was successful, run the analysis to populate the UI
        â”‚  1058 â”‚                 if (successfulTimeframes > 0) {
        â”‚  1059 â”‚                     addLog('ğŸ”„ Running multi-timeframe analysis...');
        â”‚  1060 â”‚                     await analyzeAllTimeframes();
        â”‚  1061 â”‚                 }
        â”‚  1062 â”‚             }
        â”‚  1063 â”‚
        â”‚  1064 â”‚         } catch (error) {
        â”‚  1065 â”‚             addLog(`âŒ Connection test failed: ${error.message}`);
        â”‚  1066 â”‚             console.error('Detailed connection test error:', error);
        â”‚  1067 â”‚         }
        â”‚  1068 â”‚     }, [fetchOHLCData, config.symbol, addLog, timeframes]);
        â”‚  1069 â”‚
        â”‚  1070 â”‚     // Cleanup on unmount
        â”‚  1071 â”‚     useEffect(() => {
        â”‚  1072 â”‚         return () => {
        â”‚  1073 â”‚             if (intervalRef.current) clearInterval(intervalRef.current);
        â”‚  1074 â”‚             if (monitorRef.current) clearInterval(monitorRef.current);
        â”‚  1075 â”‚         };
        â”‚  1076 â”‚     }, []);
        â”‚  1077 â”‚
        â”‚  1078 â”‚     const getTrendColor = (trend: string): string => {
        â”‚  1079 â”‚         switch (trend) {
        â”‚  1080 â”‚             case 'bullish': return '#00ff88';
        â”‚  1081 â”‚             case 'bearish': return '#ff4757';
        â”‚  1082 â”‚             default: return '#ffa502';
        â”‚  1083 â”‚         }
        â”‚  1084 â”‚     };
        â”‚  1085 â”‚
        â”‚  1086 â”‚     const getAlignmentColor = (alignment: string): string => {
        â”‚  1087 â”‚         switch (alignment) {
        â”‚  1088 â”‚             case 'aligned_bullish': return '#00ff88';
        â”‚  1089 â”‚             case 'aligned_bearish': return '#ff4757';
        â”‚  1090 â”‚             case 'mixed': return '#ffa502';
        â”‚  1091 â”‚             default: return '#74b9ff';
        â”‚  1092 â”‚         }
        â”‚  1093 â”‚     };
        â”‚  1094 â”‚
        â”‚  1095 â”‚     // Define WebSocket and currentSymbol
        â”‚  1096 â”‚     const [ws, setWs] = useState<WebSocket | null>(null);
        â”‚  1097 â”‚     const [currentSymbol, setCurrentSymbol] = useState(config.symbol);
        â”‚  1098 â”‚     const [timeframeAnalysis, setTimeframeAnalysis] = useState<{ [key: string]: string }>({});
        â”‚  1099 â”‚     const [overallAnalysis, setOverallAnalysis] = useState('NEUTRAL');
        â”‚  1100 â”‚
        â”‚  1101 â”‚     useEffect(() => {
        â”‚  1102 â”‚         setCurrentSymbol(config.symbol); // Update currentSymbol when config.symbol changes
        â”‚  1103 â”‚     }, [config.symbol]);
        â”‚  1104 â”‚
        â”‚  1105 â”‚     // Establish WebSocket connection on component mount
        â”‚  1106 â”‚   const authorizeAPI = async (token: string) => {
        â”‚  1107 â”‚     try {
        â”‚  1108 â”‚       const ws = new WebSocket('wss://ws.derivws.com/websockets/v3?app_id=75771');
        â”‚  1109 â”‚
        â”‚  1110 â”‚       return new Promise((resolve, reject) => {
        â”‚  1111 â”‚         ws.onopen = () => {
        â”‚  1112 â”‚           ws.send(JSON.stringify({
        â”‚  1113 â”‚             authorize: token,
        â”‚  1114 â”‚             req_id: Date.now()
        â”‚  1115 â”‚           }));
        â”‚  1116 â”‚         };
        â”‚  1117 â”‚
        â”‚  1118 â”‚         ws.onmessage = (event) => {
        â”‚  1119 â”‚           const data = JSON.parse(event.data);
        â”‚  1120 â”‚           if (data.authorize) {
        â”‚  1121 â”‚             setIsAuthorized(true);
        â”‚  1122 â”‚             setAuthToken(token);
        â”‚  1123 â”‚             ws.close();
        â”‚  1124 â”‚             resolve(data);
        â”‚  1125 â”‚           } else if (data.error) {
        â”‚  1126 â”‚             ws.close();
        â”‚  1127 â”‚             reject(data.error);
        â”‚  1128 â”‚           }
        â”‚  1129 â”‚         };
        â”‚  1130 â”‚
        â”‚  1131 â”‚         ws.onerror = (error) => {
        â”‚  1132 â”‚           ws.close();
        â”‚  1133 â”‚           reject(error);
        â”‚  1134 â”‚         };
        â”‚  1135 â”‚       });
        â”‚  1136 â”‚     } catch (error) {
        â”‚  1137 â”‚       console.error('Authorization failed:', error);
        â”‚  1138 â”‚       throw error;
        â”‚  1139 â”‚     }
        â”‚  1140 â”‚   };
        â”‚  1141 â”‚
        â”‚  1142 â”‚   // Contract Purchase Function
        â”‚  1143 â”‚   const purchaseContract = async (direction: 'CALL' | 'PUT') => {
        â”‚  1144 â”‚     if (!isAuthorized || !authToken || currentContract) {
        â”‚  1145 â”‚       return;
        â”‚  1146 â”‚     }
        â”‚  1147 â”‚
        â”‚  1148 â”‚     try {
        â”‚  1149 â”‚       const ws = new WebSocket('wss://ws.derivws.com/websockets/v3?app_id=75771');
        â”‚  1150 â”‚
        â”‚  1151 â”‚       return new Promise((resolve, reject) => {
        â”‚  1152 â”‚         ws.onopen = () => {
        â”‚  1153 â”‚           // First get proposal
        â”‚  1154 â”‚           const proposalRequest = {
        â”‚  1155 â”‚             proposal: 1,
        â”‚  1156 â”‚             amount: parseFloat(config.stake),
        â”‚  1157 â”‚             basis: 'stake',
        â”‚  1158 â”‚             contract_type: direction,
        â”‚  1159 â”‚             currency: 'USD',
        â”‚  1160 â”‚             duration: parseInt(config.tick_count),
        â”‚  1161 â”‚             duration_unit: 't',
        â”‚  1162 â”‚             symbol: config.symbol,
        â”‚  1163 â”‚             req_id: Date.now()
        â”‚  1164 â”‚           };
        â”‚  1165 â”‚
        â”‚  1166 â”‚           ws.send(JSON.stringify(proposalRequest));
        â”‚  1167 â”‚         };
        â”‚  1168 â”‚
        â”‚  1169 â”‚         ws.onmessage = (event) => {
        â”‚  1170 â”‚           const data = JSON.parse(event.data);
        â”‚  1171 â”‚
        â”‚  1172 â”‚           if (data.proposal) {
        â”‚  1173 â”‚             // Purchase the contract
        â”‚  1174 â”‚             const buyRequest = {
        â”‚  1175 â”‚               buy: data.proposal.id,
        â”‚  1176 â”‚               price: parseFloat(config.stake),
        â”‚  1177 â”‚               req_id: Date.now() + 1
        â”‚  1178 â”‚             };
        â”‚  1179 â”‚
        â”‚  1180 â”‚             ws.send(JSON.stringify(buyRequest));
        â”‚  1181 â”‚           } else if (data.buy) {
        â”‚  1182 â”‚             setCurrentContract({
        â”‚  1183 â”‚               id: data.buy.contract_id,
        â”‚  1184 â”‚               type: direction,
        â”‚  1185 â”‚               stake: parseFloat(config.stake),
        â”‚  1186 â”‚               startTime: Date.now(),
        â”‚  1187 â”‚               payout: data.buy.payout
        â”‚  1188 â”‚             });
        â”‚  1189 â”‚
        â”‚  1190 â”‚             setLastSignal(`Contract purchased: ${direction} for $${config.stake}`);
        â”‚  1191 â”‚             ws.close();
        â”‚  1192 â”‚             resolve(data);
        â”‚  1193 â”‚           } else if (data.error) {
        â”‚  1194 â”‚             setLastSignal(`Purchase failed: ${data.error.message}`);
        â”‚  1195 â”‚             ws.close();
        â”‚  1196 â”‚             reject(data.error);
        â”‚  1197 â”‚           }
        â”‚  1198 â”‚         };
        â”‚  1199 â”‚
        â”‚  1200 â”‚         ws.onerror = (error) => {
        â”‚  1201 â”‚           ws.close();
        â”‚  1202 â”‚           reject(error);
        â”‚  1203 â”‚         };
        â”‚  1204 â”‚       });
        â”‚  1205 â”‚     } catch (error) {
        â”‚  1206 â”‚       console.error('Contract purchase failed:', error);
        â”‚  1207 â”‚       setLastSignal(`Purchase error: ${error}`);
        â”‚  1208 â”‚     }
        â”‚  1209 â”‚   };
        â”‚  1210 â”‚
        â”‚  1211 â”‚   // Monitor Contract Status
        â”‚  1212 â”‚   const monitorContract = async (contractId: string) => {
        â”‚       Â·         â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€
        â”‚       Â·                â•°â”€â”€ `monitorContract` redefined here
        â”‚  1213 â”‚     if (!contractId) return;
        â”‚  1214 â”‚
        â”‚  1215 â”‚     try {
        â”‚       â•°â”€â”€â”€â”€
        â”‚
Fix error, click outside, or press Esc to close the overlay.

Disable overlay by setting Rsbuild's dev.client.overlay config to false.